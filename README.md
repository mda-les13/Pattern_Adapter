# Pattern_Adapter

Паттерн **Adapter** (Адаптер) используется для преобразования интерфейса одного класса в другой, совместимый с потребностями клиента. Он позволяет взаимодействовать несовместимым интерфейсам, сохраняя их независимость. Это особенно полезно при интеграции старого кода с новыми системами или сторонними библиотеками.

---

### **Основные компоненты паттерна:**
1. **Target (Целевой интерфейс)**  
   Интерфейс, который ожидает клиентский код. Адаптер реализует этот интерфейс.
2. **Adaptee (Адаптируемый класс)**  
   Класс с несовместимым интерфейсом, который нужно адаптировать под `Target`.
3. **Adapter (Адаптер)**  
   Реализует `Target` и делегирует вызовы методам `Adaptee`, преобразуя запросы.
4. **Client (Клиент)**  
   Код, который работает с `Target`, не зная о реальной реализации через `Adaptee`.

---

### **Ключевые моменты:**
- **Композиция vs Наследование:**  
  В C# чаще используется **объектный адаптер** через композицию (как в примере), так как язык не поддерживает множественное наследование классов.
- **Преобразование интерфейсов:**  
  Адаптер может менять не только сигнатуры методов, но и типы данных (например, `decimal` → `double`).
- **Клиент независим от Adaptee:**  
  Класс `ShoppingCart` не знает, что под капотом используется `LegacyPaymentSystem`. Он работает только с `IPaymentProcessor`.
- **Гибкость:**  
  Если в будущем потребуется заменить `LegacyPaymentSystem` на новую систему, достаточно будет создать новый адаптер без изменения клиентского кода.
- **Инверсия зависимостей:**  
  Клиент зависит от абстракции (`IPaymentProcessor`), а не от конкретной реализации — это соответствует принципу SOLID.

---

### **Плюсы и минусы:**
- **+** Повторное использование существующих классов без изменения их кода.
- **+** Упрощает интеграцию сторонних библиотек и устаревших систем.   
- **+** Соответствует принципу открытости/закрытости (Open/Closed Principle).  
- **-** Увеличивает количество классов в проекте.   
- **-** Возможные проблемы с производительностью при частом преобразовании данных.
- **-** Может усложнять отладку из-за косвенного вызова методов.

---

### **Когда использовать:**
- При интеграции **старого кода** с новыми интерфейсами.  
- При работе с **устаревшими API**, чей интерфейс не соответствует вашим требованиям.  
- Для интеграции **сторонних библиотек** в существующие системы.  
- Когда нужно **адаптировать данные** между слоями приложения (например, DTO ↔ Domain Model).

### **Реальный пример:**
- **ADO.NET:** `DataAdapter` преобразует данные из базы данных в `DataSet`.  
- **ASP.NET Core:** Адаптеры для OAuth-провайдеров (Google, Facebook и т.д.), которые приводят их API к единому интерфейсу `IAuthenticationHandler`.  
- **Логгирование:** Адаптер для преобразования логов из разных библиотек (NLog, Serilog) в единый формат.
